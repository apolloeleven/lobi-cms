!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$el=e,this.initValues(),this.attribute=this.$el.data("attr"),this.createParentContainer(),this.addToolbar(),this.addButtonListener()}return i(t,[{key:"initValues",value:function(){this.requestData=new FormData,this.containerTemplate='<div class="content-editable-container"></div>',this.$container=null,this.originalUrl=null,this.$globalContainer=$(".content-editable-container"),this.toolbarTemplate='<div class="button-toolbar">\n                                <button class="btn btn-sm btn-primary btn-save">Save</button>\n                                <button class="btn btn-sm btn-default btn-cancel">Cancel</button>\n                            </div>',this.$toolbar=null,this.$saveBtn=null,this.$cancelBtn=null}},{key:"createParentContainer",value:function(){var t=this;this.$container=$(this.containerTemplate),this.$container.insertBefore(this.$el),this.$container.append(this.$el),this.$container.click(function(){t.contentClick()}),this.$container.focusout(function(){setTimeout(function(){var e=$(document.activeElement),n=e.closest(".button-toolbar");t.$el.html()!==e.html()&&t.$toolbar.data("content-id")!==n.data("content-id")&&(t.$container.removeClass("active"),t.$el.html(t.$el.data("originalContent")))},1)})}},{key:"addToolbar",value:function(){this.$toolbar=$(this.toolbarTemplate),this.$container.append(this.$toolbar),this.$toolbar.data("content-id",this.$el.data("content-id"))}},{key:"addButtonListener",value:function(){var t=this;this.$saveBtn=this.$container.find(".btn-save"),this.$cancelBtn=this.$container.find(".btn-cancel"),this.$editBtn=this.$container.find(".btn-edit-backend"),this.$saveBtn.click(function(){t.save()}),this.$cancelBtn.click(function(){t.cancel()})}},{key:"cancel",value:function(){this.$el.html(this.$el.data("originalContent"))}},{key:"contentClick",value:function(){this.$globalContainer.removeClass("active"),this.$el.data("originalContent",this.$el.html()),this.$container.addClass("active")}},{key:"save",value:function(){var t=this;this.prepareRequestData(),$.ajax({url:"/content-tree/edit-content",method:"POST",data:this.requestData,cache:!1,contentType:!1,processData:!1,success:function(e){e.success?t.successNotify():t.errorNotify()},error:function(){t.errorNotify()}}),this.afterSave()}},{key:"afterSave",value:function(){this.$el.data("originalContent",this.$el.html())}},{key:"prepareRequestData",value:function(){this.requestData.append("language",this.$el.data("language")),this.requestData.append("content-id",this.$el.data("content-id")),this.requestData.append("attribute",this.$el.data("attr")),this.requestData.append("type",this.$el.data("type")),this.requestData.append("content",this.$el.html())}},{key:"successNotify",value:function(){$.notify(this.$el.data("attr")+" Saved",{className:"success",clickToHide:!0,autoHide:!0,globalPosition:"bottom left"})}},{key:"errorNotify",value:function(){$.notify(this.$el.data("attr")+" Not Saved",{className:"error",clickToHide:!0,autoHide:!0,globalPosition:"bottom left"})}}]),t}();e.default=o},function(t,e,n){n(2),t.exports=n(3)},function(t,e,n){"use strict";$(document).ready(function(){})},function(t,e,n){"use strict";var i=c(n(4)),o=c(n(5)),a=c(n(6)),r=c(n(7)),l=c(n(8)),s=c(n(9));function c(t){return t&&t.__esModule?t:{default:t}}$(function(){$("body").hasClass("content-editable")&&(CKEDITOR.disableAutoInline=!0),sessionStorage.hasOwnProperty("scroll")&&($(window).scrollTop(sessionStorage.scroll),sessionStorage.removeItem("scroll")),$("[data-editable=true]").each(function(){var t=$(this);if("rich-text"===t.data("type"))new a.default(t);else if("single-line"===t.data("type"))new o.default(t);else if("image"===t.data("type"))new i.default(t)}),$("[data-type=section]").each(function(){new r.default($(this))});var t=!0;$("[data-type=content-link]").each(function(){!0===t&&(t=new l.default);new s.default($(this),t)}),$("#with-hidden-checkbox").change(function(){sessionStorage.scroll=$(window).scrollTop();var t=location.search;t.indexOf("&hidden=1")>-1?t=t.replace("&hidden=1",""):t.indexOf("?hidden=1&")>-1?t=t.replace("?hidden=1&",""):t.indexOf("?hidden=1")>-1?t="":"?"!==t&&t?t+="&hidden=1":t="?hidden=1",window.location.href=location.origin+location.pathname+t+location.hash})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(i):void 0},a=function(t){return t&&t.__esModule?t:{default:t}}(n(0));var r=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"initValues",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initValues",this).call(this),this.$el.closest("a").removeAttr("href"),this.chooseImageTemplate='<div class="upload-btn-wrapper">\n                    <button class="upload-btn btn btn-default">Choose</button>\n                    <input type="file"/>\n                </div>'}},{key:"prepareRequestData",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareRequestData",this).call(this),this.requestData.append(this.attribute,this.$chooseBtn.find("input[type=file]")[0].files[0])}},{key:"afterSave",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"afterSave",this).call(this),this.originalUrl=this.tempUrl}},{key:"cancel",value:function(){this.$el.attr("src",this.originalUrl)}},{key:"createParentContainer",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createParentContainer",this).call(this),this.addControls()}},{key:"addControls",value:function(){var t=this;this.$chooseBtn=$(this.chooseImageTemplate),this.$container.append(this.$chooseBtn),this.$file=$(this.$chooseBtn.find("input[type=file]")[0]),this.originalUrl=this.$el.attr("src"),this.$file.change(function(){if(this.files&&this.files[0]){var e=new FileReader;e.onload=function(e){t.$el.attr("src",e.target.result),t.tempUrl=e.target.result},e.readAsDataURL(this.files[0])}})}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));var a=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"createParentContainer",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createParentContainer",this).call(this),this.$el.attr("contenteditable",!0)}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(n(0));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.initialize(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),i(e,[{key:"initialize",value:function(){CKEDITOR.inline(this.$el.get(0))}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$el=e,this.initValues(),this.init()}return i(t,[{key:"initValues",value:function(){this.toolbar='<div class="upper-button-toolbar">\n                              \n                                <button class="btn btn-warning btn-pretty btn-xs btn-edit">Edit in Backend</button>\n                            </div>',this.hideBtn='<button class="btn btn-success btn-pretty btn-xs btn-hide"></button>',this.withHidden=null,this.$toolbar=$(this.toolbar),this.$hideBtn=$(this.hideBtn),this.$editBtn=this.$toolbar.find(".btn-edit")}},{key:"init",value:function(){var t=this;this.$el.addClass("content-editable-section"),this.$el.hasClass("content-hidden")?(this.$hideBtn.html("Show"),this.$hideBtn.data("state",0)):(this.$hideBtn.html("hide"),this.$hideBtn.data("state",1)),this.$toolbar.prepend(this.$hideBtn),this.$el.prepend(this.$toolbar),this.$hideBtn.click(function(){t.sectionHideButtonClick()}),this.$editBtn.click(function(){window.open(t.$el.data("backend-url"))})}},{key:"sectionHideButtonClick",value:function(){confirm("You Want To Hide "+this.$el.data("title").trim()+" Section")&&(this.withHidden=$("#with-hidden-checkbox:checked").length>0,this.hide())}},{key:"successResponse",value:function(){0===this.$hideBtn.data("state")?(this.$hideBtn.data("state",1),this.$hideBtn.html("hide"),this.$el.removeClass("content-hidden")):(this.$hideBtn.data("state",0),this.$hideBtn.html("Show"),this.$el.addClass(this.withHidden?"content-hidden":"hidden"))}},{key:"hide",value:function(){var t=this;$.ajax({url:"/content-tree/hide-section",method:"POST",data:{contentId:this.$el.data("content-id"),state:this.$hideBtn.data("state")},success:function(e){e.success?t.successResponse():t.errorNotify()},error:function(){t.errorNotify()}})}},{key:"successNotify",value:function(){$.notify(this.$el.data("attr")+" Saved",{className:"success",clickToHide:!0,autoHide:!0,globalPosition:"bottom left"})}},{key:"errorNotify",value:function(){$.notify(this.$el.data("attr")+" Not Saved",{className:"error",clickToHide:!0,autoHide:!0,globalPosition:"bottom left"})}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initDialog(),this.initTree(),this.initLinkButton(),this.data={},this.linkedIds=[],this.tree=[],this.url=null,this.$el=null}return i(t,[{key:"initDialog",value:function(){var t=this;this.dialog='\n    <div id="linked-modal" class="fade modal" role="dialog" tabindex="-1">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>\n                    <h2 style="margin-left: 50px">Choose From Pages</h2>\n                </div>\n                <div id="tree-modal-body" class="modal-body" data-key="2">\n                        <div id="jstree-choose"></div>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" id="linked-button" class="btn btn-primary">Link</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    ',this.$dialog=$(this.dialog),$("body").append(this.$dialog),this.$dialog.on("shown.bs.modal",function(){0===t.tree.length&&$.ajax({url:"/content-tree/get-tree",type:"POST",data:{},success:function(e){t.tree=JSON.parse(e),t.applyDataToTree()}})})}},{key:"initLinkButton",value:function(){var t=this;this.$linkButton=this.$dialog.find("#linked-button"),this.$linkButton.click(function(){t.$tree.jstree("get_checked",null,!0).forEach(function(e){t.data.parentLinkId=parseInt(e)}),$.ajax({url:"/content-tree/link-tree",type:"POST",data:t.data,success:function(e){(e=JSON.parse(e)).success?(t.$el.url=e.url,t.$dialog.modal("hide"),t.successNotify()):t.errorNotify()}})})}},{key:"intElement",value:function(t){this.$el=t}},{key:"initTree",value:function(){this.$tree=this.$dialog.find("#jstree-choose")}},{key:"applyDataToTree",value:function(){this.$tree.jstree({plugins:["checkbox","rules","types","wholerow"],checkbox:{three_state:!1},core:{multiple:!1,data:this.tree},types:{website:{icon:"fa fa-globe"},page:{icon:"fa fa-file-powerpoint-o"},video_section:{icon:"fa fa-file-video-o"},content_text:{icon:"fa fa-file-text"},teaser:{icon:"fa fa-file-text"},section:{icon:"fa fa-folder-open-o"},service:{icon:"fa fa-wrench"},pharmaceutical_form:{icon:"fa fa-medkit"}}})}},{key:"successNotify",value:function(){$.notify("Saved",{className:"success",clickToHide:!0,autoHide:!0,globalPosition:"bottom left"})}},{key:"errorNotify",value:function(){$.notify("Not Saved",{className:"error",clickToHide:!0,autoHide:!0,globalPosition:"bottom left"})}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$el=e,this.$modal=n,this.url=null,this.initValues()}return i(t,[{key:"initValues",value:function(){var t=this;this.url=this.$el.attr("href"),this.$el.removeAttr("href"),this.$link=$('<i class="fa fa-external-link content-editable-link"></i>'),this.$link.click(function(e){e.stopPropagation(),window.open(t.url)}),this.$el.append(this.$link),this.$el.click(function(){t.$modal.$dialog.modal("show"),t.$modal.data.parentId=t.$el.data("content-id"),t.$modal.data.linkId=t.$el.data("link-content-id"),t.$modal.intElement(t)})}}]),t}();e.default=o}]);
//# sourceMappingURL=app.js.map